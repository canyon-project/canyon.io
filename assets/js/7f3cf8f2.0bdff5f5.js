"use strict";(self.webpackChunkcanyon_io=self.webpackChunkcanyon_io||[]).push([[944],{27:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>r,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>o,toc:()=>a});var l=s(4848),i=s(8453);const c={title:"\u5b89\u88c5 Canyon",sidebar_position:10},d=void 0,o={id:"getting-started/installing-canyon",title:"\u5b89\u88c5 Canyon",description:"\u5148\u51b3\u6761\u4ef6",source:"@site/docs/getting-started/installing-canyon.mdx",sourceDirName:"getting-started",slug:"/getting-started/installing-canyon",permalink:"/canyon.io/docs/getting-started/installing-canyon",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/getting-started/installing-canyon.mdx",tags:[],version:"current",sidebarPosition:10,frontMatter:{title:"\u5b89\u88c5 Canyon",sidebar_position:10},sidebar:"tutorialSidebar",previous:{title:"\u4e3b\u8981\u533a\u522b",permalink:"/canyon.io/docs/overview/key-differences"},next:{title:"\u4e0a\u62a5\u7b2c\u4e00\u4e2a\u8986\u76d6\u7387\u6570\u636e",permalink:"/canyon.io/docs/getting-started/first-coverage"}},r={},a=[{value:"\u5148\u51b3\u6761\u4ef6",id:"\u5148\u51b3\u6761\u4ef6",level:2},{value:"\u7cfb\u7edf\u8981\u6c42",id:"\u7cfb\u7edf\u8981\u6c42",level:3},{value:"\u5b89\u88c5 Node.js\u3001npm\u3001pnpm",id:"\u5b89\u88c5-nodejsnpmpnpm",level:3},{value:"Node.js + npm",id:"nodejs--npm",level:4},{value:"pnpm",id:"pnpm",level:3},{value:"Docker",id:"docker",level:3},{value:"Postgres\u6570\u636e\u5e93",id:"postgres\u6570\u636e\u5e93",level:3},{value:"\u521b\u5efa\u8868",id:"\u521b\u5efa\u8868",level:4},{value:"\u5b89\u88c5\u548c\u6784\u5efa",id:"\u5b89\u88c5\u548c\u6784\u5efa",level:2},{value:"\u914d\u7f6e\u73af\u5883",id:"\u914d\u7f6e\u73af\u5883",level:3},{value:"Node.js",id:"nodejs",level:3},{value:"Docker",id:"docker-1",level:3},{value:"\u542f\u52a8\u6210\u529f",id:"\u542f\u52a8\u6210\u529f",level:2}];function t(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.h2,{id:"\u5148\u51b3\u6761\u4ef6",children:"\u5148\u51b3\u6761\u4ef6"}),"\n",(0,l.jsx)(e.p,{children:"Canyon \u662f\u4e00\u4e2aJavaScript\u4ee3\u7801\u8986\u76d6\u7387\u89e3\u51b3\u65b9\u6848\uff0c\u6253\u5305\u4e3a\u4e00\u7ec4 Docker \u5bb9\u5668\u3002\u60a8\u53ef\u4ee5\u5728\u4efb\u4f55\u53ef\u4ee5\u8fd0\u884cDocker Engine \u7684\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u5b89\u88c5\u5e76\u8fd0\u884c Canyon \u3002\n\u60a8\u53ef\u4ee5\u5728\u672c\u5730\u8ba1\u7b97\u673a\u6216\u60a8\u9009\u62e9\u7684\u4e91\u63d0\u4f9b\u5546\u4e0a\u4f7f\u7528 Canyon\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"\u7cfb\u7edf\u8981\u6c42",children:"\u7cfb\u7edf\u8981\u6c42"}),"\n",(0,l.jsx)(e.p,{children:"Canyon \u8bbe\u8ba1\u4e3a\u5728\u5c0f\u578b\u548c\u5927\u578b\u90e8\u7f72\u4e2d\u90fd\u80fd\u826f\u597d\u8fd0\u884c\u3002\u8fd0\u884c Canyon \u7684\u6700\u4f4e\u8981\u6c42\u662f\u64cd\u4f5c\u7cfb\u7edf\u652f\u6301 Docker \u548c 1 \u4e2a CPU \u6838\u5fc3 + 2GB RAM \u6765\u751f\u6210\u6784\u5efa\u6620\u50cf\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"\u5b89\u88c5-nodejsnpmpnpm",children:"\u5b89\u88c5 Node.js\u3001npm\u3001pnpm"}),"\n",(0,l.jsx)(e.h4,{id:"nodejs--npm",children:"Node.js + npm"}),"\n",(0,l.jsxs)(e.p,{children:["\u5b89\u88c5 ",(0,l.jsx)(e.a,{href:"https://nodejs.org/en",children:(0,l.jsx)(e.code,{children:"Node.js"})})," (v18+) \u548c ",(0,l.jsx)(e.a,{href:"https://www.npmjs.com",children:(0,l.jsx)(e.code,{children:"npm"})})," (v9+)."]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://nodejs.org/en/download",children:"Node.js + npm \u5b89\u88c5\u624b\u518c"})}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"pnpm",children:"pnpm"}),"\n",(0,l.jsxs)(e.p,{children:["\u5b89\u88c5 ",(0,l.jsx)(e.a,{href:"https://pnpm.io",children:(0,l.jsx)(e.code,{children:"pnpm"})})," (v6+)."]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://pnpm.io/installation",children:"pnpm \u5b89\u88c5\u624b\u518c"})}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"docker",children:"Docker"}),"\n",(0,l.jsxs)(e.p,{children:["\u5b89\u88c5 ",(0,l.jsx)(e.a,{href:"https://www.docker.com",children:(0,l.jsx)(e.code,{children:"Docker"})})," (v20+)."]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://docs.docker.com/engine/install",children:"Docker \u5b89\u88c5\u624b\u518c"})}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"postgres\u6570\u636e\u5e93",children:"Postgres\u6570\u636e\u5e93"}),"\n",(0,l.jsx)(e.p,{children:"Canyon \u4f7f\u7528 Postgres \u6570\u636e\u5e93\u6765\u5b58\u50a8\u6240\u6709\u6570\u636e\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u60a8\u9009\u62e9\u7684\u4efb\u4f55 Postgres \u6570\u636e\u5e93\u63d0\u4f9b\u5546 - \u6258\u7ba1\u5728\u672c\u5730\u6216\u4e91\u63d0\u4f9b\u5546\u4e0a\u3002\u786e\u4fdd\u60a8\u62e5\u6709\u4ee5\u4e0b\u683c\u5f0f\u7684\u6709\u6548 Postgres \u6570\u636e\u5e93 URL\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"postgresql://username:password@url:5432/dbname\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u521b\u5efa\u8868",children:"\u521b\u5efa\u8868"}),"\n",(0,l.jsxs)(e.p,{children:["\u5efa\u8868sql\u6587\u4ef6\u5728 ",(0,l.jsx)(e.a,{href:"https://github.com/canyon-project/canyon/blob/dev/packages/canyon-backend/prisma/create-table.sql",children:"canyon/packages/canyon-backend/prisma/schema.sql"})," \u4e2d"]}),"\n",(0,l.jsx)(e.h2,{id:"\u5b89\u88c5\u548c\u6784\u5efa",children:"\u5b89\u88c5\u548c\u6784\u5efa"}),"\n",(0,l.jsx)(e.p,{children:"\u4e86\u89e3\u5982\u4f55\u5b89\u88c5\u548c\u6784\u5efa Canyon \u793e\u533a\u7248\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"\u914d\u7f6e\u73af\u5883",children:"\u914d\u7f6e\u73af\u5883"}),"\n",(0,l.jsx)(e.p,{children:"\u5728\u5f00\u59cb\u5b89\u88c5\u4e4b\u524d\uff0c\u60a8\u9700\u8981\u914d\u7f6e\u73af\u5883\u53d8\u91cf\u3002"}),"\n",(0,l.jsx)(e.p,{children:".env.example\u5c06\u514b\u9686\u5b58\u50a8\u5e93\u6839\u76ee\u5f55\u4e2d\u627e\u5230\u7684\u6587\u4ef6\u5185\u5bb9\u590d\u5236\u5230.env\u73af\u5883\u53d8\u91cf\u5e76\u6dfb\u52a0\u60a8\u7684\u503c\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u786e\u4fdd\u73af\u5883\u503c\u4e0d\u5305\u542b\u5728\u5f15\u53f7\u5185\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:'# Prisma Config\nDATABASE_URL=postgress://canyon:canyon@localhost:5432/canyon\n\n# Gitlab Config\nGITLAB_URL="***"\nGITLAB_CLIENT_ID="***"\nGITLAB_CLIENT_SECRET="***"\nPRIVATE_TOKEN=***\n\nREDIRECT_URI=http://localhost:3000/login\n\n'})}),"\n",(0,l.jsx)(e.p,{children:"\u8ba9\u6211\u4eec\u6765\u4e86\u89e3\u4e00\u4e0b\u4e3b\u8981\u7684\u73af\u5883\u53d8\u91cf\uff1a"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"DATABASE_URL"}),": \u5728\u6b64\u5904\u6dfb\u52a0 Postgres \u6570\u636e\u5e93 URL\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"GITLAB_URL"}),": gitlab\u7684URL\u3002\u4f8b\u5982\uff1a",(0,l.jsx)(e.code,{children:"https://gitlab.com"}),"."]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"GITLAB_CLIENT_ID"}),": \u4ece Gitlab OAuth \u914d\u7f6e\u4e2d\u83b7\u53d6\u7684\u5ba2\u6237\u7aef ID\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"GITLAB_CLIENT_SECRET"}),": \u4ece Gitlab OAuth \u914d\u7f6e\u4e2d\u83b7\u53d6\u7684\u5ba2\u6237\u7aef\u5bc6\u94a5\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"PRIVATE_TOKEN"}),": \u7533\u8bf7\u4e00\u4e2a\u79c1\u6709\u4ee4\u724c\uff0c\u4ee5\u4fbf\u5728 Gitlab \u4e0a\u6267\u884c\u64cd\u4f5c\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"REDIRECT_URI"}),": \u91cd\u5b9a\u5411 URI \u7528\u4e8e OAuth\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["gitlab\u7684\u914d\u7f6e\u53ef\u4ee5\u6309\u7167",(0,l.jsx)(e.a,{href:"https://docs.gitlab.com/ee/api/oauth2.html",children:"gitlab\u914d\u7f6e OAuth \u6307\u5357"})]}),"\n",(0,l.jsx)(e.h3,{id:"nodejs",children:"Node.js"}),"\n",(0,l.jsx)(e.p,{children:"\u514b\u9686\u9879\u76ee"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"git clone https://github.com/canyon-project/canyon\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5b89\u88c5\u4f9d\u8d56\u9879\u5e76\u6784\u5efa\u9879\u76ee"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"pnpm install && pnpm run build\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4fee\u6539.env\u6587\u4ef6\uff0c\u4f7f\u7528nodejs\u8fd0\u884c\u9879\u76ee"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"node packages/canyon-backend/dist/main.js\n"})}),"\n",(0,l.jsx)(e.h3,{id:"docker-1",children:"Docker"}),"\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528docker\u8fd0\u884ccanyon\u53ea\u9700\u8981\u6307\u5b9a\u73af\u5883\u53d8\u91cf\u6587\u4ef6\u8def\u5f84\u548c\u7aef\u53e3\u53f7\u5373\u53ef"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"docker run -d -p 8080:8080 -v /your/path/.env:/app/.env zhangtao25/canyon:main\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u542f\u52a8\u6210\u529f",children:"\u542f\u52a8\u6210\u529f"}),"\n",(0,l.jsx)(e.p,{children:"\u542f\u52a8\u6210\u529f\u540e\u4f1a\u6709\u4e09\u4e2a\u4e3b\u8981\u7684\u670d\u52a1\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Canyon frontend"}),"\n",(0,l.jsx)(e.li,{children:"Canyon backend"}),"\n",(0,l.jsx)(e.li,{children:"Canyon task"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\u8bbf\u95ee ",(0,l.jsx)(e.code,{children:"http://localhost:8080"})," \u4ee5\u67e5\u770b Canyon \u7684\u4e3b\u9875\u3002"]}),"\n",(0,l.jsx)("img",{style:{boxShadow:"0 2px 5px 1px rgba(64,60,67,.16)",borderRadius:"10px",overflow:"hidden"},src:s(1627).A})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}},1627:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/app-welcome-a0790e4a4e9a21afc059e74987de1069.jpg"},8453:(n,e,s)=>{s.d(e,{R:()=>d,x:()=>o});var l=s(6540);const i={},c=l.createContext(i);function d(n){const e=l.useContext(c);return l.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:d(n.components),l.createElement(c.Provider,{value:e},n.children)}}}]);